<div class="page_edit">
	<div class="container">
		<h2 class="edit_title mt-3 mb-2">Edit your review</h2>
		<% if @review.errors.any? %>
	        <div id="error_explanation">
	            <h3><%= @review.errors.count %>error prohibited this obj from being saved:</h3>
	            <ul>
	                <% @review.errors.full_messages.each do |message| %>
	                <li><%= message %></li>
	                <% end %>
	            </ul>
	        </div>
	    <% end %>

		<%= form_with model: @review,url:review_path(@review.id), method: :patch, local: true do |f| %>
			<table class="table mt-2">
				<tr>
					<th><%= f.label 'restaurant name' %></th>
					<td><%= f.text_field :restaurant_name, :placeholder => "店名" %></td>
				</tr>
				<tr>
					<th><%= f.label 'distination' %></th>
					<td>
						<%= f.text_field :country, :placeholder => "国名(例:France) 半角英", class: 'country', id: :country %>

						<%= f.text_field :city, :placeholder => "都市名(例:Paris) 半角英", class: 'city',id: :city %>
						<!-- <script>
						  $( function() {
						    $( "#country" ).autocomplete({
						      autoFocus: true,
						      source: "/reviews/new.json",
						      minLength: 0,
						    });
						  });

						  $( function() {
						    $( "#city" ).autocomplete({
						      autoFocus: true,
						      source: "/reviews/new.json",
						      minLength: 0,
						    });
						  });
						</script> -->
					</td>
				</tr>
				<tr>
					<th><%= f.label 'address' %></th>
					<td><%= f.text_area :address,:size=>"30", :placeholder => "住所" %></td>
				</tr>
				<tr>
					<th><%= f.label 'budget' %></th>
					<td>
						<%#= f.select :currency, ['$',' € ','￡', '￥','Kr','Fr','₩','R','₺','₡','₪','₹','ரூ','₫','฿','؋','₱' ], {include_blank: '通貨を選択してください'},class: 'sample' %>
						<%= f.text_field :budget,:placeholder => "予算(最低)" %> 〜 <%= f.text_field :maximum_budget, :placeholder => "予算(上限額)" %>
					</td>
				</tr>
				<tr>
					<th><%= f.label 'review' %></th>
					<td><%= f.text_area :review ,:size=>"50x8",:placeholder => "レビュー"%></td>
				</tr>
				<tr>
					<th><%= f.label 'genre' %> </th>
  					<td><%= f.collection_select :genre_id, Genre.where(is_active: true), :id, :genre_name, prompt: "-- 選択してください --" %></td>
				</tr>
				<tr>
					<th><%= f.label 'review_images' %></th>
					<td>
						<div class="post__drop__box__container">
				            <div class="prev-content"></div>
				            <div class="label-content">
				              <label class="label-box" for="review_images_attributes_0_image" id="label-box--0">
				                <pre class="label-box__text-visible"></pre>
				              </label>
				            </div>

				            <div class="hidden-content">
				            	<%= f.fields_for :review_images do |image_form| %>
				            		<div>
					            		<% if image_form.object.image.present? %>
					            			<%= image_tag image_form.object.image.url, class: 'review_images_prev' %>
					            		<% end %>
					            		<%= image_form.file_field :image, class: 'hidden-field' %>
					            		<%= image_form.hidden_field :id, value: image_form.object.id %>
				            		</div>
				            	<% end %>
				            </div>
		        		</div>
					</td>
				</tr>
				<tr>
					<td><%= f.submit 'send', class: "btn btn-outline-secondary" %></td>
				</tr>
			</table>
		<% end %>
	</div>
</div>